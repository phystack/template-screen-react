# Design Documentation

This directory contains UX design documents generated by `/setup` and maintained during development by the `ux-designer` agent.

## Documents

### brand-guidelines.md
Non-visual brand information: voice, tone, copy style, imagery direction. Visual identity (colors, spacing) lives in `src/schema.ts` theme fields — this file covers only the aspects that can't be expressed as design tokens.

Generated when: `/setup` identifies a specific brand or the user provides brand context.

### personas.md
User personas derived from the PRD and domain research. Documents who uses the app, their goals, technical comfort level, and context of use.

Updated when: User research reveals new insights during feature development.

### design-system.md
How to use the `settings.theme.*` fields in components. Documents:
- Styled-components patterns for consuming theme values
- Spacing conventions and layout grid
- Responsive breakpoints for different screen orientations
- Component patterns (cards, buttons, headers, etc.)

**Important**: This file documents _usage patterns_, not values. The single source of truth for theme values is `src/schema.ts`. Never duplicate color codes, font names, or spacing values here — always reference the schema.

Updated when: New theme patterns are established during `/feature` implementation.

### wireframes.md
Text-based (ASCII art) wireframes for every screen in the app. Each wireframe is annotated with:
- `settings.theme.*` references for colors and spacing
- `settings.*` references for content
- Touch target sizes
- Responsive notes for different orientations

Updated when: New screens are added or existing screens change during `/feature`.

### interaction-flows.md
Mermaid diagrams showing user journeys through the app. These focus on the **user perspective** — what the user sees, touches, and experiences — distinct from architecture's system state diagrams.

Includes:
- Screen-to-screen navigation flows
- Session lifecycle (idle → active → complete → idle)
- Error recovery paths
- Timeout and fallback behaviors

Updated when: Navigation flow changes during feature implementation.

### accessibility.md
Accessibility requirements and implementation patterns:
- Target WCAG level (based on PRD requirements)
- ARIA roles and patterns for each component type
- Color contrast requirements
- Focus management strategy
- Screen reader considerations (if applicable)
- Touch target minimums

Updated when: New interactive patterns are introduced.

## TenantSettings Compatibility

The theme values in `src/schema.ts` are designed to align with the platform's TenantSettings branding schema:

### How It Works

1. **Schema defaults** (`@default` values in `src/schema.ts`) represent the brand's intended defaults for standalone use. These are set during `/setup` based on brand research.

2. **Org-level branding** configured in Console > Organisation > Branding flows into the app via the settings system. When an admin sets colors, fonts, and spacing in the console, those values override the schema defaults.

3. **`yarn download-settings`** brings real org branding into dev mode. The downloaded settings are saved to `src/settings/index.json` and take priority over the schema-generated defaults.

### Field Mapping

| Schema Theme Field | TenantSettings Path | Set By |
|-------------------|---------------------|--------|
| `theme.primaryColor` | `brandIdentity.primaryColor` | `/setup` brand research or Console > Branding |
| `theme.secondaryColor` | `brandIdentity.secondaryColor` | `/setup` brand research or Console > Branding |
| `theme.backgroundColor` | `layoutColors.background` | `/setup` theme direction or Console > Branding |
| `theme.surfaceColor` | `layoutColors.surface` | `/setup` theme direction or Console > Branding |
| `theme.borderRadius` | `spacing.borderRadius` | `/setup` visual style or Console > Branding |

### Settings Priority (Same as App Runtime)

The ux-designer agent reads theme values using the same priority as the app:

1. `src/settings/index.json` — Real org branding (downloaded)
2. `src/settings/.generated.json` — Generated from schema `@default` values
3. `src/schema.ts` `@default` annotations — Direct fallback

This means designs automatically reflect whichever branding source is active.

### Fonts

Font fields are intentionally omitted from the schema theme. Users upload custom fonts via Console > Organisation > Branding. The schema defaults to system fonts (`sans-serif`). When `yarn download-settings` is used, the org's uploaded fonts are included in the downloaded settings.

## Format

All design docs use text-based representations (ASCII art wireframes, Mermaid diagrams, structured markdown) that can be consumed by both humans and AI agents. They serve as the bridge between the PRD (what to build) and implementation (how it's built), with the schema as the authoritative source for design token values.
